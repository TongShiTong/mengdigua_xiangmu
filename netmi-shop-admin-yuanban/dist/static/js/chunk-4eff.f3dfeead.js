(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4eff"],{FDUY:function(e,t,s){"use strict";s.r(t);var i=s("gDS+"),a=s.n(i),o=s("t3Un"),l=s("7Qib"),r=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"],["clean"]],n={data:function(){return{optionProps:{value:"id",label:"name",children:"pidList"},hideUploadEdit:!1,hideUploadEdit2:!1,store_id:"",status:"",giftOp:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"}],activeType:[{label:"待上架",value:"1"},{label:"上架待审核",value:"2"},{label:"待定价",value:"3"},{label:"待上架",value:"4"},{label:"已上架",value:"5"},{label:"下架待审核",value:"6"},{label:"已下架",value:"7"}],activeType2:[{label:"上架待审核",value:"2"},{label:"待上架",value:"4"}],isCreate:!0,treeArr:[],detail:"",fullscreenLoading:!1,allSku:"",oldSpcs:"",goods_id:"",MainSpcList:"",shop_id:0,isGorys:[],Gorys:[],ExpData:[],checkedGorys:[],base_api:Object(l.c)(),dialogTable1Visible:!1,key_word2:"",shops:[],total_pages2:0,storeId:"0",storeName:"",goodstype:"0",sbc_id:"",sbc_arr:[],giftLevel:"",defaultProps:{children:"categoryList",label:"name"},goodsname:"",dialogImageUrl:"",dialogImageUrl2:"",dialogVisible:!1,dialogVisible2:!1,fileList:[],fileList2:[],goodsNum:"",item_label:"",goodsIntro:"",scale:"",goodsOrd:"",prePrice:"",goodsStock:"",mainPrice:"",goodsMSpec:[""],goodsSpecList:[[]],goodsSpecListId:[[""]],specIMG:!0,imageUrlList:[""],spcPrePrice:"",spcPrice:"",appPrice:"9999999999999",spcStock:"",spcrelPrice:"",imdx:0,dialogVisible3:!1,Allchecked:!1,checked1:!1,input1:"",checked2:!1,input2:"",checked3:!1,input3:"",checked4:!1,input4:"",checked5:!1,input5:"",tableData:[{spcGroup:"红色大个",stock:"12",price1:"200",price2:"200",price3:"200",price4:"200",goodNum:1,delNum:111},{spcGroup:"红色小个",stock:"12",price1:"200",price2:"200",price3:"200",price4:"200",goodNum:12,delNum:123}],expressType:"1",expressPrice:"",goodsWeight:"",expCtype:"",expoptions:[{value:"1",label:"模板1"},{value:"2",label:"模板2"},{value:"3",label:"模板3"},{value:"4",label:"模板4"},{value:"5",label:"模板5"}],expvalue:"",goodsPoint:"",growthPoint:"",vrdealNum:"",isVIP:"0",isNews:"0",isBorad:"0",is_bonus:"0",content:"",content2:"",editorOption:{modules:{toolbar:{container:r,handlers:{image:function(e){e?document.querySelector(".imgupload1").click():this.quill.format("image",!1)}}}}},editorOption2:{modules:{toolbar:{container:r,handlers:{image:function(e){e?document.querySelector(".imgupload2").click():this.quill.format("image",!1)}}}}},username:"",refRea:"",item_category:null}},mounted:function(){setTimeout(function(){window.scrollTo(0,0)},500)},created:function(){this.username=this.$route.query.username,console.log(this.username),this.$route.query.store_id&&(this.store_id=this.$route.query.store_id),this.$route.query.shop_id&&(this.shop_id=this.$route.query.shop_id,this.storeId=this.$route.query.shop_id),this.$route.query.item_id&&(this.goods_id=this.$route.query.item_id,this.isCreate=!1,this.getMainSpc(),this.getOldSpc(),this.getAllSku(),this.getDetail()),this.getGorys(),this.getExps(),this.getpinglei()},methods:{cascChange:function(e){console.log(e),console.log(this.sbc_arr)},tongguo:function(){var e=this;if(!this.checkedGorys[0])return this.$message({type:"warning",message:"请选择至少一个分类"}),!1;this.$confirm("您确定通过该商品的审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.goodsSucc()}).catch(function(){})},jujue:function(){var e=this,t=this;this.$prompt("请输入拒绝理由","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var i=s.value;i?(t.refRea=i,t.goodsRefu()):e.$message({type:"warning",message:"输入不能为空"})}).catch(function(){})},goodsRefu:function(){var e=this,t=this.$loading({lock:!0});Object(o.a)({method:"post",url:"/item/me-item-api/item-check-refuse",data:{item_id:e.goods_id,reason:e.refRea}}).then(function(s){t.close(),0==s.data.errcode?e.$message({message:"商品审核已拒绝！",type:"success"}):e.$message({message:s.data.errmsg,type:"warning"})}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},goodsSucc:function(){var e=this,t=[];this.checkedGorys.forEach(function(e,s,i){t.push(e.mcid)});var s=this.$loading({lock:!0});Object(o.a)({method:"post",url:"/item/me-item-api/item-check-pass",data:{item_id:e.goods_id,cate_list:t}}).then(function(t){s.close(),0==t.data.errcode?e.$message({message:"商品审核已通过",type:"success"}):e.$message({message:t.data.errmsg,type:"warning"})}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},goodsKind:function(){0==this.goodstype&&(this.giftLevel="")},expItem:function(e){var t=this;console.log(e),this.ExpData.forEach(function(s,i,a){s.id==e&&(t.expCtype=s.type)})},oneExp:function(){this.expCtype="",this.expvalue=""},skuAllcheck:function(e){e?(this.checked1=!0,this.checked2=!0,this.checked3=!0,this.checked4=!0,this.checked5=!0):(this.checked1=!1,this.checked2=!1,this.checked3=!1,this.checked4=!1,this.checked5=!1)},skuSigcheck:function(e){e||(this.Allchecked=!1),e&&this.checked1&&this.checked2&&this.checked3&&this.checked5&&(this.Allchecked=!0)},getNodes233:function(){this.getCheckedNodes()},getCheckedNodes:function(){this.checkedGorys=this.$refs.tree.getCheckedNodes()},handleRemove111:function(e,t){this.fileList=t,this.hideUploadEdit=t.length>=5},handleEditChange:function(e,t){this.hideUploadEdit=t.length>=5},handleEditChange2:function(e,t){this.hideUploadEdit2=t.length>=1},handleRemove:function(e,t){this.fileList=t,console.log(e,t)},imgUpSecceed:function(e,t,s){this.fileList=s,console.log(t,s)},handleRemove222:function(e,t){this.fileList2=t,this.hideUploadEdit2=t.length>=1},imgUpSecceed2:function(e,t,s){this.fileList2=s,console.log(t,s)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handlePictureCardPreview2:function(e){this.dialogImageUrl2=e.url,this.dialogVisible2=!0},beforeAvatarUpload:function(e){var t=e.size/1024/1024<3,s="image/webp"===e.type,i="image/png"===e.type,a="image/jpg"===e.type,o="image/jpeg"===e.type,l="image/gif"===e.type;return t||this.$message.error("上传图片大小不能超过 3MB!"),s&&this.$message.error("上传图片不能是webp格式!"),i||a||o||l||this.$message.error("上传图片只能是jpg,png,jpeg!"),t&&!s&&!!(i||a||o||l)},beforeAvatarUpload2:function(e){var t=e.size/1024/1024<5,s="video/mp4"===e.type;return t||this.$message.error("上传视频大小不能超过 5MB!"),s||this.$message.error("上传文件只能是mp4格式!"),t&&s},handleExceed:function(e,t){this.$message.warning("商品主图最多上传5张")},handleExceed2:function(e,t){this.$message.warning("文件上传已经达到上限")},addSPC:function(e){this.goodsSpecListId[e].push(""),this.imageUrlList.push("")},delSPC:function(e){this.goodsSpecListId[e].pop(),this.imageUrlList.pop()},addMainSpc:function(){this.goodsMSpec.push(""),this.goodsSpecList.push([]),this.goodsSpecListId.push([""])},delMainSpc:function(e){this.goodsMSpec.splice(e,1),this.goodsSpecList.splice(e,1),this.goodsSpecListId.splice(e,1)},seleimdx:function(e){this.imdx=e},handleAvatarSuccess4:function(e,t){console.log(e.data.url),this.$set(this.imageUrlList,this.imdx,e.data.url),this.imageUrlList[this.imdx]=e.data.url,console.log(this.imageUrlList)},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCurrentChange2:function(e){this.start_page2=e-1,this.getShops()},openShops:function(){this.dialogTable1Visible=!0,this.getShops()},getShops:function(){var e=this;Object(o.a)({method:"post",url:"/shop/shop-api/index",data:{start_page:e.start_page2,pages:6,key_word:e.key_word2}}).then(function(t){e.total_pages2=parseInt(t.data.data.total_pages),e.shops=t.data.data.list,console.log(e.shops)}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},sureSelectShop:function(e){this.storeId=e.id,this.store_id=e.id,this.storeName=e.name,this.dialogTable1Visible=!1,this.expressType="",this.expressPrice="",this.expvalue="",this.expCtype="",this.getExps(this.storeId),this.getMainSpc(this.storeId)},handleAvatarSuccessRich1:function(e,t,s){var i=this.$refs.QuillEditor.quill;console.log(e),console.log(t),console.log(s);var a=s.length,o=0;if(s.forEach(function(e,t,s){"success"==e.status&&o++}),o==a){var l=i.getSelection().index;s.forEach(function(e,t,s){i.insertEmbed(l,"image",e.response.data.url),l++}),this.$refs.uploadRich1.clearFiles()}},handleAvatarSuccessRich2:function(e,t,s){var i=this.$refs.QuillEditor2.quill;console.log(e),console.log(t),console.log(s);var a=s.length,o=0;if(s.forEach(function(e,t,s){"success"==e.status&&o++}),o==a){var l=i.getSelection().index;s.forEach(function(e,t,s){i.insertEmbed(l,"image",e.response.data.url),l++}),this.$refs.uploadRich2.clearFiles()}},getGorys:function(){var e=this;Object(o.a)({method:"post",url:"/item/me-item-api/get-item-category",data:{shop_id:e.shop_id,item_id:e.goods_id,item_category:e.item_category}}).then(function(t){console.log("商品分类信息",t.data.data),e.Gorys=t.data.data.list,e.isGorys=t.data.data.item_category,e.Gorys.forEach(function(t,s,i){e.Gorys[s].categoryList.forEach(function(t,i,a){e.Gorys[s].categoryList[i].disabled=!0})}),setTimeout(function(){e.isGorys[0]&&e.isGorys.forEach(function(t,s,i){e.$refs.tree.setChecked(t,!0)})},500),console.log(e.Gorys)}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},getMainSpc:function(e){var t=this;Object(o.a)({method:"post",url:"/item/me-item-value-api/get-prop",data:{shop_id:t.store_id?t.store_id:t.shop_id,item_id:e||t.goods_id}}).then(function(e){t.MainSpcList=e.data.data,console.log("主规格名",t.MainSpcList)}).catch(function(e){t.$message({message:e.data.errmsg,type:"warning"})})},selectMain:function(e,t){console.log(e),console.log(t),this.$set(this.goodsMSpec,t,e),console.log("商品主规格名id数组",this.goodsMSpec),this.getchildSpc(e,t)},getchildSpc:function(e,t){var s=this;Object(o.a)({method:"post",url:"/item/me-item-value-api/get-prop-value",data:{prop_id:e}}).then(function(e){s.$set(s.goodsSpecList,t,e.data.data),console.log("规格值二维数组",s.goodsSpecList)}).catch(function(e){s.$message({message:e.data.errmsg,type:"warning"})})},selectChild:function(e,t,s){console.log(e),console.log(t),console.log(s),console.log("商品规格值二维数组",this.goodsSpecListId)},getExps:function(e){var t=this;Object(o.a)({method:"post",url:"/express/express-api/get-list",data:{shop_id:e||t.shop_id}}).then(function(e){t.ExpData=e.data.data,console.log(t.ExpData)}).catch(function(e){t.$message({message:e.data.errmsg,type:"warning"})})},getOldSpc:function(){var e=this;Object(o.a)({method:"post",url:"/item/me-item-api/get-property",data:{item_id:e.goods_id}}).then(function(t){console.log("该商品已配置的规格",t.data.data),e.oldSpcs=t.data.data,e.oldSpcs.forEach(function(t,s,i){console.log(t),e.$set(e.goodsMSpec,s,e.oldSpcs[s].prop_name),console.log(e.goodsMSpec),e.$set(e.goodsSpecList,s,e.oldSpcs[s].children);var a=[];t.children.forEach(function(t,i,o){e.$set(a,i,t.value_name),0==s&&e.$set(e.imageUrlList,i,t.img_url),console.log(3333333333333333e4,e.imageUrlList)}),e.$set(e.goodsSpecListId,s,a),e.getchildSpc(t.prop_id,s)})}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},cerateSku:function(){var e=this,t=[],s=[],i={skuFirst:"",skuSecond:[]};return console.log("要创建SKU了",e.goodsSpecListId),e.goodsSpecListId.forEach(function(o,l,r){if(0==l){var n=a()(i),c=JSON.parse(n);c.skuFirst=e.goodsMSpec[l],c.skuSecond=o,s.push(c)}if(0!=l){var d=a()(i),p=JSON.parse(d);p.skuFirst=e.goodsMSpec[l],p.skuSecond=o,t.push(p)}}),console.log("这是otherSKU",t),e.goodsSpecListId[0]?e.spcPrice||0!=e.shop_id&&""!=e.shop_id?e.spcrelPrice?e.spcPrePrice?e.spcStock?(e.fullscreenLoading=!0,void Object(o.a)({method:"post",url:"/item/me-item-value-api/create-sku",data:{skuFirstValue:s,imageUrl:e.imageUrlList,skuOther:t,money:e.spcPrice,supply_price:e.appPrice,cost:e.spcrelPrice,old_price:e.spcPrePrice,stock:e.spcStock,item_id:e.goods_id,addImg:1*e.specIMG}}).then(function(t){e.fullscreenLoading=!1,e.getAllSku()}).catch(function(t){e.fullscreenLoading=!1,e.$message({message:t.data.errmsg,type:"warning"})})):(this.$message({message:"商品库存未填写",type:"warning"}),!1):(this.$message({message:"商品原价未填写",type:"warning"}),!1):(this.$message({message:"商品成本价未填写",type:"warning"}),!1):(this.$message({message:"商品价格未填写",type:"warning"}),!1):(this.$message({message:"商品主规格未填写",type:"warning"}),!1)},getAllSku:function(){var e=this;Object(o.a)({method:"post",url:"/item/me-item-value-api/get-me-item-value-list",data:{item_id:e.goods_id}}).then(function(t){e.allSku=t.data.data,console.log("获取全部组合列表",e.allSku)}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},refreshSkus:function(){var e=this;this.fullscreenLoading=!0,console.log("即将被更新的规格组合数据",e.allSku),Object(o.a)({method:"post",url:"/item/me-item-value-api/update-sku",data:{item_id:e.goods_id,sku_data:e.allSku}}).then(function(t){e.dialogVisible3=!1,e.fullscreenLoading=!1,console.log(t),e.$message({message:"信息更新成功",type:"success"})}).catch(function(t){e.fullscreenLoading=!1,e.$message({message:t.data.errmsg,type:"warning"})})},spcAllchange:function(){var e=this;if(!this.allSku[0])return e.$message({message:"目前没有规格可以配置",type:"warning"}),!1;if(!(this.checked1||this.checked2||this.checked3||this.checked5))return e.$message({message:"请至少选择一项",type:"warning"}),!1;if(this.checked1){if(!this.input1)return e.$message({message:"请输入库存",type:"warning"}),!1;e.allSku.forEach(function(t,s,i){e.$set(e.allSku[s],"stock",e.input1)})}if(this.checked2){if(!this.input2)return e.$message({message:"请输入原价",type:"warning"}),!1;e.allSku.forEach(function(t,s,i){e.$set(e.allSku[s],"old_price",e.input2)})}if(this.checked3&&(0==this.shop_id||""==this.shop_id)){if(!this.input3)return e.$message({message:"请输入售价",type:"warning"}),!1;e.allSku.forEach(function(t,s,i){e.$set(e.allSku[s],"price",e.input3)})}if(this.checked5){if(!this.input5)return e.$message({message:"请输入成本价",type:"warning"}),!1;e.allSku.forEach(function(t,s,i){e.$set(e.allSku[s],"contract_price",e.input5)})}e.refreshSkus()},createGoods:function(){var e=this;if(!this.goodstype)return this.$message({message:"商品类型未选择",type:"warning"}),!1;if(!this.sbc_id)return this.$message({message:"商品品类未选择",type:"warning"}),!1;if(this.status||(1*this.shop_id?this.status=2:this.status=1),!this.checkedGorys[0]&&!this.giftLevel)return this.$message({message:"商品所属分类未选择",type:"warning"}),!1;if(!this.goodsname)return this.$message({message:"商品名称未填写",type:"warning"}),!1;if(!this.fileList[0])return console.log(this.fileList),this.$message({message:"至少需要一张商品主图",type:"warning"}),!1;if(!this.prePrice)return this.$message({message:"商品原价未填写",type:"warning"}),!1;if(!this.goodsStock)return this.$message({message:"商品库存未填写",type:"warning"}),!1;if(!this.mainPrice)return this.$message({message:"商品售价未填写",type:"warning"}),!1;if(!this.expressType)return this.$message({message:"请选择快递方式",type:"warning"}),!1;if(2==this.expressType&&!this.expvalue)return this.$message({message:"请选择快递模板",type:"warning"}),!1;var t=[];this.checkedGorys.forEach(function(e,s,i){t.push(e.mcid)});var s=[];this.fileList.forEach(function(e,t,i){s.push(e.response.data.url)});var i="";this.fileList2[0]&&(i=this.fileList2[0].response.data.url),this.fullscreenLoading=!0,Object(o.a)({method:"post",url:"/item/me-item-api/create-item",data:{username:e.username,item_type:e.goodstype,sbc_id:e.sbc_id,cate_list:t,gift_item_level:e.giftLevel,multi_urls:s,status:e.status,short_video_url:i,title:e.goodsname,item_code:e.goodsNum,item_label:e.item_label,remark:e.goodsIntro,scale:e.scale,stock:e.goodsStock,price:e.mainPrice,old_price:e.prePrice,shop_id:e.storeId?e.storeId:e.shop_id,earn_score:e.goodsPoint,earn_growth:e.growthPoint,deal_num_false:e.vrdealNum,is_vip:e.isVIP,is_buy:e.isNews,express_template_type:e.expressType,postage:e.expressPrice,template_id:e.expvalue,template_type:e.expCtype,weight:e.goodsWeight,is_abroad:e.isBorad,is_bonus:e.is_bonus,rich_text:e.content,buy_rich_text:e.content2}}).then(function(t){e.fullscreenLoading=!1,0==t.data.errcode?(e.goods_id=t.data.data.item_id,e.getMainSpc(),e.$message({message:"商品已生成",type:"success"})):e.$message({message:t.data.errmsg,type:"warning"})}).catch(function(t){e.fullscreenLoading=!1,e.$message({message:t.data.errmsg,type:"warning"})})},makeGoods:function(){var e=this;if(!this.goods_id)return this.$message({message:"请先配置规格生成商品",type:"warning"}),!1;if(!this.goodstype)return this.$message({message:"商品类型未选择",type:"warning"}),!1;if(!this.sbc_id)return this.$message({message:"商品品类未选择",type:"warning"}),!1;if(!this.goodsname)return this.$message({message:"商品名称未填写",type:"warning"}),!1;if(!this.fileList[0])return console.log(this.fileList),this.$message({message:"至少需要一张商品主图",type:"warning"}),!1;if(!this.prePrice)return this.$message({message:"商品原价未填写",type:"warning"}),!1;if(!this.mainPrice)return this.$message({message:"商品售价未填写",type:"warning"}),!1;if(!this.goodsStock)return this.$message({message:"商品库存未填写",type:"warning"}),!1;if(!this.expressType)return this.$message({message:"请选择快递方式",type:"warning"}),!1;if(2==this.expressType&&!this.expvalue)return this.$message({message:"请选择快递模板",type:"warning"}),!1;var t=[];this.checkedGorys.forEach(function(e,s,i){t.push(e.mcid)});var s=[];this.fileList.forEach(function(e,t,i){s.push(e.response.data.url)});var i="";this.fileList2[0]&&(i=this.fileList2[0].response.data.url),this.fullscreenLoading=!0,Object(o.a)({method:"post",url:"/item/me-item-api/update-item",data:{username:e.username,item_id:e.goods_id,item_type:e.goodstype,sbc_id:e.sbc_id,cate_list:t,status:e.status,gift_item_level:e.giftLevel,multi_urls:s,short_video_url:i,title:e.goodsname,item_code:e.goodsNum,item_label:e.item_label,remark:e.goodsIntro,scale:e.scale,stock:e.goodsStock,price:e.mainPrice,old_price:e.prePrice,shop_id:e.storeId?e.storeId:e.shop_id,earn_score:e.goodsPoint,earn_growth:e.growthPoint,deal_num_false:e.vrdealNum,is_vip:e.isVIP,is_buy:e.isNews,express_template_type:e.expressType,postage:e.expressPrice,template_id:e.expvalue,template_type:e.expCtype,weight:e.goodsWeight,is_abroad:e.isBorad,is_bonus:e.is_bonus,rich_text:e.content,buy_rich_text:e.content2}}).then(function(t){e.fullscreenLoading=!1,0==t.data.errcode?(e.refreshSkus(),e.$message({message:"商品已更新",type:"success"})):e.$message({message:t.data.errmsg,type:"warning"})}).catch(function(t){e.fullscreenLoading=!1,e.$message({message:t.data.errmsg,type:"warning"})})},getDetail:function(){var e=this;Object(o.a)({method:"post",url:"/item/me-item-api/info",data:{item_id:e.goods_id}}).then(function(t){if(e.detail=t.data.data,console.log("获取到的商品详情",e.detail),e.status=String(e.detail.status),e.giftLevel=e.detail.gift_item_level,e.goodstype=e.detail.item_type,setTimeout(function(){e.sbc_arr.forEach(function(t,s,i){t.pidList.forEach(function(s,i,a){s.id==e.detail.sbc_id&&(e.sbc_id=[t.id,e.detail.sbc_id,e.detail.three_sbc_id])})})},500),e.storeId=e.detail.shop_id,e.getExps(e.storeId),e.storeName=e.detail.shop_name,e.goodsNum=e.detail.item_code,e.item_label=e.detail.item_label,e.expCtype=String(e.detail.template_type),e.cate_list="",e.fileList=[],e.detail.multi_urls.forEach(function(t,s,i){var a={url:"",response:{data:{url:""}}};a.url=t,a.response.data.url=t,e.fileList.push(a)}),e.hideUploadEdit=e.fileList.length>=5,e.detail.short_video_url){e.fileList2=[];var s={url:"",response:{data:{url:""}}};s.url=e.detail.short_video_url,s.response.data.url=e.detail.short_video_url,e.fileList2.push(s)}e.hideUploadEdit2=e.fileList2.length>=1,e.goodsname=e.detail.title,e.goodsIntro=e.detail.remark,e.scale=e.detail.scale,e.goodsStock=e.detail.stock,e.mainPrice=e.detail.price,e.prePrice=e.detail.old_price,e.goodsPoint=e.detail.earn_score,e.growthPoint=e.detail.earn_growth,e.vrdealNum=e.detail.deal_num_false,e.isVIP=e.detail.is_vip,e.isNews=e.detail.is_buy,e.expressType=e.detail.express_template_type,e.expressPrice=1*e.detail.postage,e.expvalue=e.detail.template_id,e.goodsWeight=1*e.detail.weight,e.isBorad=e.detail.is_abroad,e.is_bonus=e.detail.is_bonus,e.content=e.detail.rich_text,e.content2=e.detail.buy_rich_text}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})},getpinglei:function(){var e=this;Object(o.a)({method:"post",url:"/shop/shop-apply-record-api/business-category-list",data:{start_page:"0",pages:"999"}}).then(function(t){e.sbc_arr=t.data.data.list,console.log("获取全部品类列表",e.sbc_arr)}).catch(function(t){e.$message({message:t.data.errmsg,type:"warning"})})}}},c=(s("ym6P"),s("KHd+")),d=Object(c.a)(n,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ag-page"},[e._m(0),e._v(" "),s("div",{staticClass:"gcon"},[s("div",{staticClass:"gcon-box1"},[s("el-form",{ref:"form",attrs:{"label-width":"120px"}},[s("el-form-item",{attrs:{rules:[{required:!0}],label:"商品类目"}},[s("el-cascader",{staticClass:"reg-inp",attrs:{props:e.optionProps,options:e.sbc_arr},on:{change:e.cascChange},model:{value:e.sbc_id,callback:function(t){e.sbc_id=t},expression:"sbc_id"}})],1),e._v(" "),4==e.goodstype?s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"礼包商品等级"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.giftLevel,callback:function(t){e.giftLevel=t},expression:"giftLevel"}},e._l(e.giftOp,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),4!=e.goodstype?s("el-form-item",{attrs:{rules:[{required:!0}],label:"商品分类"}},[s("el-tree",{ref:"tree",attrs:{data:e.Gorys,props:e.defaultProps,"show-checkbox":"","node-key":"mcid",label:"name",children:"categoryList","highlight-current":""},on:{"check-change":function(t){e.getNodes233()}}})],1):e._e(),e._v(" "),4==e.goodstype||0!=e.shop_id&&""!=e.shop_id?e._e():s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"来源店铺"}},[s("el-input",{model:{value:e.storeName,callback:function(t){e.storeName=t},expression:"storeName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"600px"},attrs:{rules:[{required:!0}],label:"标题"}},[s("el-input",{model:{value:e.goodsname,callback:function(t){e.goodsname=t},expression:"goodsname"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"900px"},attrs:{rules:[{required:!0}],label:"商品主图(750px*750px)"}},[e._l(e.fileList,function(t,i){return s("img",{key:i,staticClass:"iimgBox",attrs:{src:t.response.data.url,alt:""},on:{click:function(s){e.handlePictureCardPreview(t)}}})}),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})])],2),e._v(" "),e.fileList2[0]?s("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"短视频 (mp4) (<5M)"}},[e._v("\n          地址："+e._s(e.fileList2[0].response.data.url)+"\n          "),s("video",{attrs:{id:"playVideos"}},[s("source",{attrs:{id:"playVideosss",src:e.fileList2[0].response.data.url,type:"video/mp4"}})])]):e._e(),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"商品货号"}},[s("el-input",{model:{value:e.goodsNum,callback:function(t){e.goodsNum=t},expression:"goodsNum"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"商品标签"}},[s("el-input",{model:{value:e.item_label,callback:function(t){e.item_label=t},expression:"item_label"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"商品简介"}},[s("el-input",{model:{value:e.goodsIntro,callback:function(t){e.goodsIntro=t},expression:"goodsIntro"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"规模"}},[s("el-input",{model:{value:e.scale,callback:function(t){e.scale=t},expression:"scale"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"排序"}},[s("el-input",{model:{value:e.goodsOrd,callback:function(t){e.goodsOrd=t},expression:"goodsOrd"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"原价"}},[s("el-input",{model:{value:e.prePrice,callback:function(t){e.prePrice=t},expression:"prePrice"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"售价"}},[s("el-input",{model:{value:e.mainPrice,callback:function(t){e.mainPrice=t},expression:"mainPrice"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"库存"}},[s("el-input",{model:{value:e.goodsStock,callback:function(t){e.goodsStock=t},expression:"goodsStock"}})],1),e._v(" "),4!=e.goodstype?s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"是否新人必买"}},[e._v("\n          "+e._s(1==e.isNews?"是":"否")+"\n          ")]):e._e(),e._v(" "),4!=e.goodstype?s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"是否参与分佣"}},[e._v("\n          "+e._s(1==e.is_bonus?"是":"否")+"\n          ")]):e._e(),e._v(" "),s("el-form-item",{staticStyle:{width:"500px"},attrs:{rules:[{required:!0}],label:"快递运费"}},[1==e.expressType?s("div",{staticStyle:{display:"flex",alignItems:"center"}},[s("el-radio",{attrs:{label:"1",disabled:""},on:{change:e.oneExp},model:{value:e.expressType,callback:function(t){e.expressType=t},expression:"expressType"}},[e._v("统一运费")]),e._v("\n               \n            "),s("el-input",{model:{value:e.expressPrice,callback:function(t){e.expressPrice=t},expression:"expressPrice"}})],1):e._e(),e._v(" "),s("div",{staticStyle:{height:"20px"}}),e._v(" "),2==e.expressType?s("div",{staticStyle:{display:"flex",alignItems:"center"}},[s("el-radio",{attrs:{label:"2"},model:{value:e.expressType,callback:function(t){e.expressType=t},expression:"expressType"}},[e._v("运费模板")]),e._v("\n               \n            "),s("el-select",{on:{change:e.expItem},model:{value:e.expvalue,callback:function(t){e.expvalue=t},expression:"expvalue"}},e._l(e.ExpData,function(e){return s("el-option",{key:e.id,attrs:{label:e.template_name,value:e.id}})})),e._v("\n               \n            ")],1):e._e()]),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.expCtype,expression:"expCtype==2"}],staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"重量(kg)"}},[s("el-input",{attrs:{placeholder:"请输入重量"},model:{value:e.goodsWeight,callback:function(t){e.goodsWeight=t},expression:"goodsWeight"}})],1),e._v(" "),e.goods_id||4==e.goodstype?e._e():s("el-form-item",{staticStyle:{width:"300px"},attrs:{rules:[{required:!0}],label:"展开规格配置"}},[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){e.createGoods()}}},[e._v("请先确认商品信息，再点击展开规格配置")])],1),e._v(" "),e.goods_id&&4!=e.goodstype?s("el-form-item",{staticStyle:{width:"900px"},attrs:{rules:[{required:!0}],label:"商品规格"}},[s("div",{staticClass:"guigeBox"},e._l(e.goodsMSpec,function(t,i){return s("div",{key:i,staticStyle:{marginTop:"10px"}},[s("el-form-item",{attrs:{label:0==i?"主规格名":"规格名"}},[s("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"规格名"},model:{value:e.goodsMSpec[i],callback:function(t){e.$set(e.goodsMSpec,i,t)},expression:"goodsMSpec[index]"}})],1),e._v(" "),s("el-form-item",{staticStyle:{marginTop:"10px"},attrs:{rules:[{required:!0}],label:"规格值"}},e._l(e.goodsSpecListId[i],function(t,a){return s("div",{key:a,staticStyle:{display:"inline-block"}},[s("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"规格值"},model:{value:e.goodsSpecListId[i][a],callback:function(t){e.$set(e.goodsSpecListId[i],a,t)},expression:"goodsSpecListId[index][inn]"}}),e._v(" "),0==i&&e.specIMG?s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.base_api+"/material/index/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess4,"before-upload":e.beforeAvatarUpload},nativeOn:{click:function(t){e.seleimdx(a)}}},[e.imageUrlList[a]?s("img",{staticClass:"avatar",attrs:{src:e.imageUrlList[a]}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()],1)})),e._v(" "),0==i?s("span",[e._v("备注：仅支持为第一组规格设置规格图片，买家选择不同规格会看到对应规格图片")]):e._e()],1)}))]):e._e(),e._v(" "),e.goods_id&&4!=e.goodstype?s("el-form-item",{staticStyle:{width:"900px"},attrs:{rules:[{required:!0}],label:"规格明细"}},[s("div",{staticClass:"guigeBox"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allSku}},[s("el-table-column",{attrs:{prop:"value_names",label:"规格组",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"stock",label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.stock,callback:function(s){e.$set(t.row,"stock",s)},expression:"scope.row.stock"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"old_price",label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.old_price,callback:function(s){e.$set(t.row,"old_price",s)},expression:"scope.row.old_price"}})],1)]}}])}),e._v(" "),0==e.shop_id||""==e.shop_id?s("el-table-column",{attrs:{prop:"price",label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.price,callback:function(s){e.$set(t.row,"price",s)},expression:"scope.row.price"}})],1)]}}])}):e._e(),e._v(" "),s("el-table-column",{attrs:{prop:"contract_price",label:"成本价"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.contract_price,callback:function(s){e.$set(t.row,"contract_price",s)},expression:"scope.row.contract_price"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"freight_number",label:"货号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.freight_number,callback:function(s){e.$set(t.row,"freight_number",s)},expression:"scope.row.freight_number"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"deal_num",label:"销量"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-input",{attrs:{size:"small"},model:{value:t.row.deal_num,callback:function(s){e.$set(t.row,"deal_num",s)},expression:"scope.row.deal_num"}})],1)]}}])})],1)],1)]):e._e(),e._v(" "),s("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"虚拟销量"}},[s("el-input",{attrs:{placeholder:"请输入虚拟销量"},model:{value:e.vrdealNum,callback:function(t){e.vrdealNum=t},expression:"vrdealNum"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"商品详情富文本"}},[s("div",{staticClass:"richBox",domProps:{innerHTML:e._s(e.content)}})]),e._v(" "),s("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"购买须知富文本"}},[s("div",{staticClass:"richBox",domProps:{innerHTML:e._s(e.content2)}})])],1)],1)]),e._v(" "),s("el-dialog",{attrs:{width:"700px",visible:e.dialogTable1Visible,title:"选择店铺"},on:{"update:visible":function(t){e.dialogTable1Visible=t}}},[s("div",{staticStyle:{padding:"5px 10px"}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入店铺名称","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.key_word2,callback:function(t){e.key_word2=t},expression:"key_word2"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.getShops()}},slot:"append"})],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shops}},[s("el-table-column",{attrs:{label:"店铺名称",prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),s("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.sureSelectShop(t.row)}}},[e._v("选择")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":6,total:e.total_pages2,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange2}})],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible3,title:"规格明细批量设置",width:"30%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[s("el-checkbox",{on:{change:e.skuAllcheck},model:{value:e.Allchecked,callback:function(t){e.Allchecked=t},expression:"Allchecked"}},[e._v("全选")]),e._v(" "),s("div",{staticClass:"spcDElist"},[s("el-checkbox",{on:{change:e.skuSigcheck},model:{value:e.checked1,callback:function(t){e.checked1=t},expression:"checked1"}},[e._v("库存")]),e._v(" "),s("div",{staticStyle:{width:"50px"}}),e._v(" "),s("el-input",{model:{value:e.input1,callback:function(t){e.input1=t},expression:"input1"}}),e._v(" "),s("div",{staticStyle:{width:"50px"}})],1),e._v(" "),s("div",{staticClass:"spcDElist"},[s("el-checkbox",{on:{change:e.skuSigcheck},model:{value:e.checked2,callback:function(t){e.checked2=t},expression:"checked2"}},[e._v("原价")]),e._v(" "),s("div",{staticStyle:{width:"50px"}}),e._v(" "),s("el-input",{model:{value:e.input2,callback:function(t){e.input2=t},expression:"input2"}}),e._v(" "),s("div",{staticStyle:{width:"50px"}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.shop_id||""==e.shop_id,expression:"(shop_id==0||shop_id=='')"}],staticClass:"spcDElist"},[s("el-checkbox",{on:{change:e.skuSigcheck},model:{value:e.checked3,callback:function(t){e.checked3=t},expression:"checked3"}},[e._v("售价")]),e._v(" "),s("div",{staticStyle:{width:"50px"}}),e._v(" "),s("el-input",{model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}}),e._v(" "),s("div",{staticStyle:{width:"50px"}})],1),e._v(" "),s("div",{staticClass:"spcDElist"},[s("el-checkbox",{on:{change:e.skuSigcheck},model:{value:e.checked5,callback:function(t){e.checked5=t},expression:"checked5"}},[e._v("成本价")]),e._v(" "),s("div",{staticStyle:{width:"30px"}}),e._v(" "),s("el-input",{model:{value:e.input5,callback:function(t){e.input5=t},expression:"input5"}}),e._v(" "),s("div",{staticStyle:{width:"50px"}})],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible3=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.spcAllchange()}}},[e._v("确 定")])],1)],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ag-page-head"},[t("div",[this._v("商品配置")]),this._v(" "),t("div",{staticClass:"ag-page-head-bottom"})])}],!1,null,null,null);d.options.__file="checkGoods.vue";t.default=d.exports},"gDS+":function(e,t,s){e.exports={default:s("oh+g"),__esModule:!0}},"oh+g":function(e,t,s){var i=s("WEpk"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},pbjS:function(e,t,s){},ym6P:function(e,t,s){"use strict";var i=s("pbjS");s.n(i).a}}]);