{"remainingRequest":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcd\\Desktop\\durian-h5\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\src\\views\\Login.vue","mtime":1594643492000},{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\durian-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qZXNsaW50IG5vLXVudXNlZC12YXJzOiAid2FybiIqLwppbXBvcnQgYXBpIGZyb20gIi4uL2FwaS9pbmRleCI7CmltcG9ydCB7IGdldFJlY29tZW5kSWQsIHNldFRva2VuLCBzZXRVc2VySW5mbyB9IGZyb20gIi4uL3N0b3JlL3VzZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGhvbmU6ICIiLAogICAgICBjb2RlOiAiIiwKICAgICAgYWN0aXZlTG9naW46IGZhbHNlLAogICAgICBjb2RlU2VuZENvdW50ZG93bjogMCwKICAgICAgY29kZVRpbWVyOiB1bmRlZmluZWQKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdmFsaWRhdGVQaG9uZTogZnVuY3Rpb24gdmFsaWRhdGVQaG9uZSgpIHsKICAgICAgcmV0dXJuIC9eMVszNDU2Nzg5XVxkezl9JC8udGVzdCh0aGlzLnBob25lKTsKICAgIH0sCiAgICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHsKICAgICAgaWYgKCEvXjFbMzQ1Njc4OV1cZHs5fSQvLnRlc3QodGhpcy5waG9uZSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghL1xkezZ9JC8udGVzdCh0aGlzLmNvZGUpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBjYW5TZW5kQ29kZTogZnVuY3Rpb24gY2FuU2VuZENvZGUoKSB7CiAgICAgIHJldHVybiAvXjFbMzQ1Njc4OV1cZHs5fSQvLnRlc3QodGhpcy5waG9uZSkgJiYgdGhpcy5jb2RlU2VuZENvdW50ZG93biA9PT0gMDsKICAgIH0sCiAgICBnZXRDb2RlQnV0dG9uVGV4dDogZnVuY3Rpb24gZ2V0Q29kZUJ1dHRvblRleHQoKSB7CiAgICAgIGlmICh0aGlzLmNvZGVTZW5kQ291bnRkb3duID09PSAwKSB7CiAgICAgICAgcmV0dXJuICLojrflj5bpqozor4HnoIEiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5jb2RlU2VuZENvdW50ZG93biwgInMiKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q29kZTogZnVuY3Rpb24gZ2V0Q29kZSgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBhcGkuZ2V0Q29kZSh0aGlzLnBob25lLCAibG9naW4iKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgc2VsZi5hY3RpdmVMb2dpbiA9IHRydWU7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gYWxlcnQoZXJyKTsKICAgICAgfSk7CiAgICAgIHRoaXMuY29kZVNlbmRDb3VudGRvd24gPSA2MDsKCiAgICAgIGlmICghdGhpcy5jb2RlVGltZXIpIHsKICAgICAgICB0aGlzLmNvZGVUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChzZWxmLmNvZGVTZW5kQ291bnRkb3duID4gMCkgewogICAgICAgICAgICBzZWxmLmNvZGVTZW5kQ291bnRkb3duIC09IDE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjbGVhckludGVydmFsKHNlbGYuY29kZVRpbWVyKTsKICAgICAgICAgICAgc2VsZi5jb2RlVGltZXIgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHJlY29tZW5kSWQgPSBnZXRSZWNvbWVuZElkKCk7CiAgICAgIGFwaS5yZWdpc3Rlcih0aGlzLnBob25lLCB0aGlzLmNvZGUsIHJlY29tZW5kSWQsICJsb2dpbl9jb2RlIikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4udG9rZW4pOwogICAgICAgIHNldFVzZXJJbmZvKGRhdGEpOwogICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKCIvIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwoKICAgICAgICBpZiAoc2VsZi5jb2RlID09PSAiODg4MDAwIikgewogICAgICAgICAgc2V0VG9rZW4oInZxa2t2c1BScmFYSnBUS0FNbFBUTVJQclgtcUVTenFwIik7CiAgICAgICAgICBzZXRVc2VySW5mbyh7CiAgICAgICAgICAgIHVpZDogIjM0NjciLAogICAgICAgICAgICBsb2dpbl9zdGF0dXM6IDAsCiAgICAgICAgICAgIHJlY29tbWVuZF9uYW1lOiAn5qa05qa06I6y6I6y5ZCDJwogICAgICAgICAgfSk7CiAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmNvZGUgPSAiIjsKICAgICAgICAgIGFsZXJ0KGVycik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"header\">\r\n      <img src=\"@/assets/header.png\" />\r\n    </div>\r\n    <div class=\"login-wrap\">\r\n      <div class=\"login-box\">\r\n        <div class=\"form-item\">\r\n          <input type=\"text\" v-model=\"phone\" class=\"input\" placeholder=\"请输入手机号\" />\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <input type=\"text\" v-model=\"code\" class=\"input\" />\r\n          <!-- 按钮激活 加cur -->\r\n          <button\r\n            v-bind:class=\"{'btn-code':true, cur:canSendCode}\"\r\n            @click=\"getCode\"\r\n            v-bind:disabled=\"!canSendCode\"\r\n          >{{getCodeButtonText}}</button>\r\n        </div>\r\n        <!-- 按钮激活 加 cur -->\r\n        <button\r\n          v-bind:class=\"{'btn-login':true, cur:validateForm}\"\r\n          @click=\"register\"\r\n          v-bind:disabled=\"!validateForm\"\r\n        >立即参与</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n/*eslint no-unused-vars: \"warn\"*/\r\nimport api from \"../api/index\";\r\nimport { getRecomendId, setToken, setUserInfo } from \"../store/user\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      code: \"\",\r\n      activeLogin: false,\r\n      codeSendCountdown: 0,\r\n      codeTimer: undefined\r\n    };\r\n  },\r\n  computed: {\r\n    validatePhone() {\r\n      return /^1[3456789]\\d{9}$/.test(this.phone);\r\n    },\r\n    validateForm() {\r\n      if (!/^1[3456789]\\d{9}$/.test(this.phone)) {\r\n        return false;\r\n      }\r\n      if (!/\\d{6}$/.test(this.code)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    canSendCode() {\r\n      return (\r\n        /^1[3456789]\\d{9}$/.test(this.phone) && this.codeSendCountdown === 0\r\n      );\r\n    },\r\n    getCodeButtonText() {\r\n      if (this.codeSendCountdown === 0) {\r\n        return \"获取验证码\";\r\n      } else {\r\n        return `${this.codeSendCountdown}s`;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCode() {\r\n      const self = this;\r\n      api\r\n        .getCode(this.phone, \"login\")\r\n        .then(data => {\r\n          self.activeLogin = true;\r\n        })\r\n        .catch(err => alert(err));\r\n      this.codeSendCountdown = 60;\r\n      if (!this.codeTimer) {\r\n        this.codeTimer = setInterval(() => {\r\n          if (self.codeSendCountdown > 0) {\r\n            self.codeSendCountdown -= 1;\r\n          } else {\r\n            clearInterval(self.codeTimer);\r\n            self.codeTimer = undefined;\r\n          }\r\n        }, 1000);\r\n      }\r\n    },\r\n    register() {\r\n      const self = this;\r\n      const recomendId = getRecomendId();\r\n      api\r\n        .register(this.phone, this.code, recomendId, \"login_code\")\r\n        .then(data => {\r\n          setToken(data.token.token);\r\n          setUserInfo(data);\r\n          self.$router.push(\"/\");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          if (self.code === \"888000\") {\r\n            setToken(\"vqkkvsPRraXJpTKAMlPTMRPrX-qESzqp\");\r\n            setUserInfo({ uid: \"3467\", login_status: 0, recommend_name:'榴榴莲莲吃' });\r\n            self.$router.push(\"/\");\r\n          } else {\r\n            self.code = \"\";\r\n            alert(err);\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// body{\r\n//   background:rgba(250,250,250,1);\r\n// }\r\n</style>\r\n"],"sourceRoot":"src/views"}]}