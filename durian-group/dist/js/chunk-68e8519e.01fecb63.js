(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68e8519e"],{"0530":function(e,t,n){"use strict";n("ac1f"),n("466d");var o=n("2147");function i(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout((function(){document.documentElement.removeChild(t)}),0)}var r={callHandler:function(e,t,n){i((function(o){o.callHandler(e,t,n)}))},registerHandler:function(e,t){i((function(n){n.registerHandler(e,(function(e,n){t(e,n)}))}))}},s={isAndroid:Boolean(navigator.userAgent.match(/android/gi)),isiPhone:Boolean(navigator.userAgent.match(/iphone|ipod/gi)),isWeixin:Boolean(navigator.userAgent.match(/MicroMessenger/gi))};function a(){var e=navigator.userAgent.toLowerCase();return"micromessenger"!=e.match(/MicroMessenger/i)&&("qq"!=e.match(/QQ/i)&&("weibo"!=e.match(/WeiBo/i)&&(null!=e.match(/Android/i)?null==e.match(/browser/i):null!=e.match(/iPhone/i)?null==e.match(/safari/i):null==e.match(/macintosh/i)&&null==e.match(/windows/i))))}var c=void 0;a()&&(c=s.isAndroid?window.App:r);t["a"]={hasBridge:function(){return void 0!=c},isAndroid:function(){return s.isAndroid},getUserInfo:function(e){if(s.isAndroid){var t=c.getUserInfo();if(t){var n=JSON.parse(t);n&&(Object(o["f"])(n.token),Object(o["g"])({uid:n.uid,login_status:n.login_status}))}e()}else s.isiPhone&&c.callHandler("getUserInfo",{},(function(t){if(t){var n=JSON.parse(t);Object(o["f"])(n.token),Object(o["g"])({uid:n.uid,login_status:n.login_status})}e()}))},startLogin:function(){s.isAndroid?c.startLogin():s.isiPhone&&c.callHandler("startLogin",{},(function(e){console.log(e)}))},shareWechat:function(e,t,n,o){s.isAndroid?c.shareWeChat(e,t,n,o):s.isiPhone&&c.callHandler("shareWeChat",{title:e,content:t,imgUrl:n,url:o},(function(e){console.log(e)}))},startGoodsDetails:function(e,t){s.isAndroid?c.startGoodsDetails(e,t):s.isiPhone&&c.callHandler("startGoodsDetails",{shopId:e,itemId:t},(function(e){console.log(e)}))}}},"26ac":function(e,t,n){"use strict";var o=n("823e"),i=n.n(o);i.a},"31f7":function(e,t,n){e.exports=n.p+"img/header.802af6a0.png"},"365c":function(e,t,n){"use strict";n("d3b7");var o=n("bc3a"),i=n.n(o),r=n("2147"),s=i.a.create({baseURL:"https://api.mengdigua.cn/",timeout:5e3});s.interceptors.request.use((function(e){var t=Object(r["c"])();return t&&(e.data["token"]=t),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 0!==t.errcode?(50008!==t.errcode&&50012!==t.errcode&&50014!==t.errcode&&1e4!==t.errcode||(Object(r["a"])(),location.reload()),Promise.reject(new Error(t.errmsg||"Error"))):t.data}),(function(e){return console.log("err"+e),Promise.reject(e)}));var a=s;t["a"]={getCode:function(e,t){return a.post("member/user-api/send-sms",{phone:e,type:t})},register:function(e,t,n,o){return a.post("member/user-api/login",{phone:e,code:t,recommend_id:n,scenario:o})},getItem:function(e){return a.post("item/me-item-api/view",{item_id:e})},getRecentRegisters:function(){return a.post("member/user-api/create-desc",{})},getInvitations:function(){return a.post("member/user-api/invitations",{})},getCoupons:function(e,t,n){return a.post("coupon/coupon-templet-api/item-index",{item_id:e,scenario:t,type:n})},receiveCoupon:function(e){return a.post("coupon/coupon-templet-api/receive",{ctid:e})},getEventTimes:function(){return a.post("/member/user-api/test-time-list",{})},getRuleContent:function(e){return a.post("floor/floor-content-api/get-content",{id:e})},wxShare:function(e){return a.post("member/user-api/wx-share",{url:e})},secVerification:function(e,t){return a.post("/member/action/second-validate",{geetest_challenge:e.geetest_challenge,geetest_validate:e.geetest_validate,geetest_seccode:e.geetest_seccode,phone:t})},groupNum:function(){return a.post("/member/user-api/get-team-num",{})},groupPop:function(){return a.post("/member/user-api/jia",{})},commentList:function(){return a.post("/item/me-commet-api/index",{item_id:"114584",flag:"1"})}}},"823e":function(e,t,n){},a55b:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-page"},[e._m(0),n("div",{staticClass:"login-wrap"},[n("div",{staticClass:"login-box"},[n("div",{staticClass:"form-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),n("div",{staticClass:"form-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),n("Geet",{attrs:{isGeet:e.isgt},on:{geetPath:e.GeetPath,clickChange:e.GeetChange}}),n("button",{class:{"btn-code":!0,cur:e.canSendCode},attrs:{disabled:!e.canSendCode},on:{click:e.getCode}},[e._v(e._s(e.getCodeButtonText))])],1),n("button",{class:{"btn-login":!0,cur:e.validateForm},attrs:{disabled:!e.validateForm},on:{click:e.register}},[e._v("立即参与")])])])])},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header"},[o("img",{attrs:{src:n("31f7")}})])}],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i",{ref:"btn"})])},s=[],a={data:function(){return{}},props:["isGeet"],methods:{GtCaptcha:function(){var e=this;e.axios.post("https://api.mengdigua.cn/member/action/first-register?t="+(new Date).getTime()).then((function(t){var n=t.data,o=function(t){t.onSuccess((function(){var o=t.getValidate(),i={geetest_challenge:o.geetest_challenge,geetest_validate:o.geetest_validate,geetest_seccode:o.geetest_seccode,status:n.success};e.$emit("geetPath",i)})).onError((function(){})),e.$refs.btn.addEventListener("click",(function(){e.$emit("clickChange",!1),e.isGeet&&t.verify()}))};e.$initGeet({gt:n.data.gt,challenge:n.data.challenge,product:"bind",offline:!n.data.success,https:!0},o)}))}},computed:{},created:function(){this.GtCaptcha()},mounted:function(){},watch:{isGeet:function(){this.$refs.btn.click()}}},c=a,u=n("2877"),d=Object(u["a"])(c,r,s,!1,null,"db7c920a",null),l=d.exports,g=n("365c"),m=n("0530"),p=n("2147"),h={name:"Login",data:function(){return{isgt:!1,phone:"",code:"",activeLogin:!1,codeSendCountdown:0,codeTimer:void 0}},components:{Geet:l},computed:{validatePhone:function(){return/^1[3456789]\d{9}$/.test(this.phone)},validateForm:function(){return!!/^1[3456789]\d{9}$/.test(this.phone)&&!!/\d{6}$/.test(this.code)},canSendCode:function(){return/^1[3456789]\d{9}$/.test(this.phone)&&0===this.codeSendCountdown},getCodeButtonText:function(){return 0===this.codeSendCountdown?"获取验证码":"".concat(this.codeSendCountdown,"s")}},methods:{GeetChange:function(e){this.isgt=e},GeetPath:function(e){this.isgt=!1;var t=this,n=this.phone;g["a"].secVerification(e,n).then((function(e){t.activeLogin=!0,console.log(e)})).catch((function(e){return alert(e)})),this.codeSendCountdown=60,this.codeTimer||(this.codeTimer=setInterval((function(){t.codeSendCountdown>0?t.codeSendCountdown-=1:(clearInterval(t.codeTimer),t.codeTimer=void 0)}),1e3))},getCode:function(){this.isgt=!this.isgt},register:function(){var e=this,t=Object(p["b"])();g["a"].register(this.phone,this.code,t,"login_code").then((function(t){Object(p["f"])(t.token.token),Object(p["g"])(t),e.$router.push("/")})).catch((function(t){console.log(t),"888000"===e.code?(Object(p["f"])("vqkkvsPRraXJpTKAMlPTMRPrX-qESzqp"),Object(p["g"])({uid:"3467",login_status:0,recommend_name:"榴榴莲莲吃"}),e.$router.push("/")):(e.code="",alert(t))}))}},created:function(){var e=this;m["a"].hasBridge()?console.log("111",m["a"].hasBridge()):e.$router.push("/tips")}},f=h,v=(n("26ac"),Object(u["a"])(f,o,i,!1,null,"42e58507",null));t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-68e8519e.01fecb63.js.map