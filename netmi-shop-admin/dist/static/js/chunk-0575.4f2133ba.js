(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0575"],{HNfp:function(t,o,e){},lQDX:function(t,o,e){"use strict";e.r(o);var i=e("t3Un"),s={name:"TplList",data:function(){return{dialogFormEdit:!1,dialogFormVisible:!1,dialogForm1Visible:!1,shop_id:"",use_position:"",title:"",content:"[]",abstract:"",use_position_name:"",posObj:{position_id:"",name:"",introduction:"1",position_code:""},plist:[],list:[],username:""}},created:function(){this.username=this.$route.query.username,this.shop_id=this.$route.query.shop_id,this.getPosList()},methods:{getPosList:function(){var t=this;Object(i.a)({method:"post",url:"/floor/floor-api/get-use-position-list",data:{shop_id:t.shop_id}}).then(function(o){console.log(o),t.plist=o.data.data}).catch(function(t){console.log(t)})},addPos:function(){var t=this;t.posObj.name?t.posObj.position_code?Object(i.a)({method:"post",url:"/floor/floor-api/add-use-position",data:{shop_id:t.shop_id,name:t.posObj.name,position_code:t.posObj.position_code,introduction:t.posObj.introduction}}).then(function(o){console.log(o),0===o.data.errcode?(t.getPosList(),t.dialogFormVisible=!1):t.$message.error(o.data.errmsg)}).catch(function(o){console.log(o),t.$message.error(o)}):t.$message({type:"info",message:"位置编码不能为空!"}):t.$message({type:"info",message:"位置名称不能为空!"})},handleSelect:function(t){this.use_position=this.plist[parseInt(t)].id,this.use_position_name=this.plist[parseInt(t)].name,this.getTplList()},savePos:function(){var t=this;t.posObj.name?Object(i.a)({method:"post",url:"/floor/floor-api/update-position",data:{position_id:t.posObj.position_id,position_code:t.posObj.position_code,name:t.posObj.name,introduction:t.posObj.introduction}}).then(function(o){console.log(o),0===o.data.errcode?(t.getPosList(),t.dialogFormEdit=!1):t.$message.error(o.data.errmsg)}).catch(function(o){console.log(o),t.$message.error(o)}):t.$message({type:"info",message:"位置名称不能为空!"})},delPos:function(t,o){var e=this;e.$confirm("此操作将删除该位置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delPosConfirm(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editPos:function(t){this.posObj.position_id=t.id,this.posObj.position_code=t.position_code,this.posObj.name=t.name,this.posObj.introduction=t.introduction,this.dialogFormEdit=!0},delPosConfirm:function(t){var o=this;Object(i.a)({method:"post",url:"/floor/floor-api/del-use-position",data:{position_id:t}}).then(function(e){console.log(e),0===e.data.errcode?(o.getPosList(),t===o.use_position&&(o.list=[])):o.$message.error(e.data.errmsg)}).catch(function(t){console.log(t),o.$message.error(t)})},getTplList:function(){var t=this;Object(i.a)({method:"post",url:"/floor/floor-api/get-floor-by-parameter",data:{shop_id:t.shop_id,use_position:t.use_position}}).then(function(o){t.list=o.data.data}).catch(function(t){console.log(t)})},addTpl:function(){var t=this;Object(i.a)({method:"post",url:"/floor/floor-api/create-floor",data:{shop_id:t.shop_id,usePosition:t.use_position,title:t.title,content:t.content,abstract:t.abstract}}).then(function(o){console.log(o),0===o.data.errcode?(t.getTplList(),t.dialogForm1Visible=!1):t.$message.error(o.data.errmsg)}).catch(function(o){console.log(o),t.$message.error(o)})},handleSet:function(t,o){var e=this;Object(i.a)({method:"post",url:"/floor/floor-api/set-enable",data:{shop_id:e.shop_id,use_position:e.use_position,floor_id:o}}).then(function(t){console.log(t),0===t.data.errcode?e.getTplList():e.$message.error(t.data.errmsg)}).catch(function(t){console.log(t),e.$message.error(t)})},handleEdit:function(t,o){this.$router.push({path:"/shop_tpl_edit",query:{floor_id:o,shop_id:this.shop_id}})},handleDelete:function(t,o){var e=this;e.$confirm("此操作将删除该模板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.handleDeleteConfirm(t,o)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleDeleteConfirm:function(t,o){var e=this;Object(i.a)({method:"post",url:"/floor/floor-api/delete-floor",data:{username:e.username,shop_id:e.shop_id,use_position:e.use_position,floor_id:o}}).then(function(t){console.log(t),0===t.data.errcode?e.getTplList():e.$message.error(t.data.errmsg)}).catch(function(t){console.log(t),e.$message.error(t)})}}},l=(e("xOaH"),e("KHd+")),n=Object(l.a)(s,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"shop-list-tpl"},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:5}},[e("div",{staticClass:"tpl-tools"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(o){t.dialogFormVisible=!0}}},[t._v("新增位置")])],1),t._v(" "),e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#eeeeee","default-active":"0"},on:{select:t.handleSelect}},t._l(t.plist,function(o,i){return e("el-menu-item",{key:i,attrs:{index:i+""}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticStyle:{"line-height":"28px"}},[t._v(t._s(o.name)+"(id:"+t._s(o.position_code)+")")]),t._v(" "),e("div",{staticStyle:{"line-height":"27px","border-bottom":"solid 1px #dddddd","font-size":"12px"}},[e("span",{staticStyle:{color:"#777777"}},[t._v(t._s(1==o.introduction?"首页显示":"普通模板"))])])]),t._v(" "),e("i",{staticClass:"el-icon-delete",staticStyle:{float:"right","margin-top":"13px"},on:{click:function(e){e.stopPropagation(),t.delPos(o.id,i)}}}),t._v(" "),e("i",{staticClass:"el-icon-edit",staticStyle:{float:"right","margin-top":"13px"},on:{click:function(e){e.stopPropagation(),t.editPos(o)}}})])}))],1),t._v(" "),t.use_position?e("el-col",{attrs:{span:19}},[e("div",{staticClass:"tpl-tools"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(o){t.dialogForm1Visible=!0}}},[t._v("新增模板")]),t._v(" "),e("span",{staticStyle:{"padding-left":"20px",color:"#66b1ff","font-size":"18px"}},[t._v("\n          "+t._s(t.use_position_name)+"\n        ")])],1),t._v(" "),e("div",{staticClass:"template-wrapper"},[e("el-row",{attrs:{gutter:30}},t._l(t.list,function(o,i){return e("el-col",{key:o.id,attrs:{xs:24,sm:12,md:8,lg:6,xl:6}},[e("div",{staticClass:"template-item"},[e("div",{staticClass:"template-item-img"},[e("div",{staticClass:"title"},[t._v(t._s(o.floor.title))])]),t._v(" "),e("div",{staticClass:"template-item-content"},[e("div",{staticClass:"title"},[t._v(t._s(o.floor.title))]),t._v(" "),e("div",{staticClass:"btn-group"},[0==o.is_enable?e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleSet(i,o.floor_id)}}},[t._v("启用")]):t._e(),t._v(" "),1==o.is_enable?e("el-button",{attrs:{type:"success",size:"mini",plain:"",disabled:""}},[t._v("已启用")]):t._e(),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleEdit(i,o.floor_id)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handleDelete(i,o.floor_id)}}},[t._v("删除")])],1)])])])}))],1)]):t._e()],1),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"页面位置新增"},on:{"update:visible":function(o){t.dialogFormVisible=o}}},[e("el-form",{attrs:{model:t.posObj}},[e("el-form-item",{attrs:{"label-width":"180px",label:"位置名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.posObj.name,callback:function(o){t.$set(t.posObj,"name",o)},expression:"posObj.name"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":"180px",label:"位置编码（首页必须填1）"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"首页必须填1"},model:{value:t.posObj.position_code,callback:function(o){t.$set(t.posObj,"position_code",o)},expression:"posObj.position_code"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":"180px",label:"是否为首页分类"}},[e("el-radio-group",{model:{value:t.posObj.introduction,callback:function(o){t.$set(t.posObj,"introduction",o)},expression:"posObj.introduction"}},[e("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){t.addPos()}}},[t._v("确 定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogFormEdit,title:"页面位置修改"},on:{"update:visible":function(o){t.dialogFormEdit=o}}},[e("el-form",{attrs:{model:t.posObj}},[e("el-form-item",{attrs:{"label-width":"180px",label:"位置名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.posObj.name,callback:function(o){t.$set(t.posObj,"name",o)},expression:"posObj.name"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":"180px",label:"是否为首页分类"}},[e("el-radio-group",{model:{value:t.posObj.introduction,callback:function(o){t.$set(t.posObj,"introduction",o)},expression:"posObj.introduction"}},[e("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){t.dialogFormEdit=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){t.savePos()}}},[t._v("确 定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogForm1Visible,title:"装修模板新增"},on:{"update:visible":function(o){t.dialogForm1Visible=o}}},[e("el-form",{attrs:{model:t.posObj}},[e("el-form-item",{attrs:{"label-width":"120px",label:"模板名称"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.title,callback:function(o){t.title=o},expression:"title"}})],1),t._v(" "),e("el-form-item",{attrs:{"label-width":"120px",label:"模板说明"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.abstract,callback:function(o){t.abstract=o},expression:"abstract"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){t.dialogForm1Visible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){t.addTpl()}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="tplList.vue";o.default=n.exports},xOaH:function(t,o,e){"use strict";var i=e("HNfp");e.n(i).a}}]);